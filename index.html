<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Valentine üíò</title>

  <style>
    :root{
      --bg1:#ffe3ea; --bg2:#ffb3c1;
      --card:#ffffff;
      --text:#1f1f1f;
      --yes:#ff2e63; --no:#343a40;
    }
    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2));
      color:var(--text);
    }

    .card{
      width:min(92vw, 640px);
      background:var(--card);
      border-radius:26px;
      padding:26px 22px 18px;
      box-shadow:0 18px 60px rgba(0,0,0,.18);
      text-align:center;
      overflow:hidden;
    }

    .textzone{ position:relative; z-index:10; }

    h1{margin:0 0 10px;font-size:clamp(28px,4vw,42px)}
    p{margin:0 0 12px;font-size:clamp(15px,2.2vw,18px)}

    .speech{
      background:#fff;
      border:2px solid #111;
      border-radius:18px;
      padding:12px 14px;
      font-weight:650;
      margin-top:14px;
      text-align:left;
    }

    .playground{
      margin-top:18px;
      width:100%;
      min-height:260px;
      border-radius:18px;
      background:#fff0f4;
      position:relative;
      overflow:hidden;
      isolation:isolate;
    }

    .gifStage{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:0;
      border-radius:18px;
      overflow:hidden;
      opacity:.85;
    }

    /* wrapper moves, img scales */
    .gifWrap{
      position:absolute;
      left:0;
      top:0;
      will-change: transform;
      opacity:0;
      transition: opacity 420ms ease;
    }
    .gifWrap.show{ opacity:.65; }

    .gifSprite{
      display:block;
      transform-origin:0 0;
      user-select:none;
      -webkit-user-drag:none;
    }

    button{
      position:absolute;
      border:0;
      border-radius:999px;
      padding:12px 18px;
      font-weight:800;
      font-size:16px;
      cursor:pointer;
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      white-space:nowrap;
      transition: transform .15s ease, left .15s ease, top .15s ease, opacity .15s ease;
      z-index:5;
    }

    #yes{
      background:var(--yes);
      color:#fff;
      left:50%;
      top:22px;
      transform:translateX(-50%) scale(1);
    }

    #no{
      background:var(--no);
      color:#fff;
      left:50%;
      top:125px;
      transform:translateX(-50%);
      z-index:6;
    }

    .result{
      display:none;
      margin-top:14px;
      padding:14px;
      background:#fff0f4;
      border-radius:18px;
      font-weight:600;
    }
    .result.show{ display:block }

    footer{
      margin-top:12px;
      font-size:12px;
      opacity:.7;
    }

    .pop{
      position:absolute;
      left:50%;
      top:50%;
      font-size:18px;
      animation:pop 900ms ease-out forwards;
      pointer-events:none;
      z-index:7;
    }
    @keyframes pop{
      to{
        opacity:0;
        transform:translate(calc(-50% + var(--x)), calc(-50% + var(--y))) scale(1.4);
      }
    }
  </style>
</head>

<body>

<main class="card">

  <div class="textzone">
    <h1>Para la futura Doctora ü©∫</h1>
    <p>Si quieres romper mi coranzoncito de pollito o por curiosidad, presiona "√ëaoooo" üòù</p>

    <div class="speech">
      <span id="speechText">selecciona....</span>
    </div>
  </div>

  <div class="playground" id="playground">
    <div class="gifStage" id="gifStage"></div>
    <button id="yes">Osiiiii</button>
    <button id="no">√ëaoooo</button>
  </div>

  <section id="result" class="result">abcdefg</section>
  <footer>~cacacacarlitosss~</footer>

</main>

<script>
const yesBtn = document.getElementById('yes');
const noBtn  = document.getElementById('no');
const speechText = document.getElementById('speechText');
const result = document.getElementById('result');
const playground = document.getElementById('playground');
const gifStage = document.getElementById('gifStage');

const GIF_SCALE = 0.3;

const gifPool = [
  "snoopy1.gif","snoopy2.gif","snoopy3.gif","snoopy4.gif","snoopy5.gif",
  "snoopy6.gif","snoopy7.gif","snoopy8.gif","snoopy9.gif"
];

let gifQueue = [...gifPool].sort(() => Math.random() - .5);
let gifIndex = 0;

const noLines = [
  "Hmmm obviamente fue x curiosidad",
  "guaoooooooooo",
  "no pense que iba hacer asi de dificil",
  "ok ya duele un poquito üòï",
  "pucha pero no seas mala üò£",
  "tanto esfuerzo y enserio no quieres saber lo que te espera üëÄ",
  "porfi ü•∫",
  "oseaaa me odias ü§ï",
  "que tipo de doctora causa tanto dolor üíî",
  "OKAY YA BASTA üò≠"
];

let noClicks = 0;
let yesCentered = false;

function rand(min,max){ return Math.random()*(max-min)+min }
function randNonZero(min,max){
  const v = rand(min,max);
  return Math.random()<.5 ? -v : v;
}

function heartPop(n=6){
  for(let i=0;i<n;i++){
    const h=document.createElement('div');
    h.className='pop';
    h.textContent=Math.random()>.5?'üíñ':'üíó';
    h.style.setProperty('--x',`${Math.random()*160-80}px`);
    h.style.setProperty('--y',`${Math.random()*120-60}px`);
    playground.appendChild(h);
    setTimeout(()=>h.remove(),900);
  }
}

function yesScale(){
  return Math.min(3.2,1+noClicks*.16);
}

function positionYes(){
  const s=yesScale();
  if(!yesCentered){
    yesBtn.style.left='50%';
    yesBtn.style.top='22px';
    yesBtn.style.transform=`translateX(-50%) scale(${s})`;
  }else{
    yesBtn.style.left='50%';
    yesBtn.style.top='50%';
    yesBtn.style.transform=`translate(-50%,-50%) scale(${s})`;
  }
}

function moveNo(){
  const pad=12;
  const W=playground.clientWidth;
  const H=playground.clientHeight;
  const nw=noBtn.offsetWidth;
  const nh=noBtn.offsetHeight;

  for(let i=0;i<200;i++){
    const x=pad+Math.random()*(W-nw-pad*2);
    const y=pad+Math.random()*(H-nh-pad*2);
    noBtn.style.left=`${x}px`;
    noBtn.style.top=`${y}px`;
    noBtn.style.transform='none';
    return;
  }
}

/* GIF PHYSICS */
let sprites=[],raf;

function spawnGif(){
  if(gifIndex>=gifQueue.length)return;
  const wrap=document.createElement('div');
  wrap.className='gifWrap';
  const img=document.createElement('img');
  img.className='gifSprite';
  img.src=gifQueue[gifIndex++]+'?v='+Date.now();
  img.style.transform=`scale(${GIF_SCALE})`;
  wrap.appendChild(img);
  gifStage.appendChild(wrap);

  img.onload=()=>{
    const w=img.naturalWidth*GIF_SCALE;
    const h=img.naturalHeight*GIF_SCALE;
    const W=playground.clientWidth;
    const H=playground.clientHeight;

    const s={
      wrap,
      x:(W-w)/2,
      y:(H-h)/2,
      w,h,
      vx:randNonZero(0.6,1.4),   // üî• SLOW SPEED
      vy:randNonZero(0.5,1.2)    // üî• SLOW SPEED
    };
    sprites.push(s);
    wrap.style.transform=`translate(${s.x}px,${s.y}px)`;
    requestAnimationFrame(()=>wrap.classList.add('show'));
    if(!raf)raf=requestAnimationFrame(tick);
  };
}

function tick(){
  const W=playground.clientWidth;
  const H=playground.clientHeight;
  sprites.forEach(s=>{
    s.x+=s.vx;
    s.y+=s.vy;
    if(s.x<=0||s.x+s.w>=W)s.vx*=-1;
    if(s.y<=0||s.y+s.h>=H)s.vy*=-1;
    s.wrap.style.transform=`translate(${s.x}px,${s.y}px)`;
  });
  raf=requestAnimationFrame(tick);
}

yesBtn.onclick=()=>{
  speechText.textContent="abcdefg";
  result.classList.add('show');
  heartPop(14);
  yesBtn.style.opacity=noBtn.style.opacity='0';
};

noBtn.onclick=()=>{
  if(noClicks>=10)return;
  speechText.textContent=noLines[noClicks++];
  if(noClicks===1)yesCentered=true;
  heartPop();
  positionYes();
  spawnGif();
  moveNo();
};
positionYes();
</script>

</body>
</html>
