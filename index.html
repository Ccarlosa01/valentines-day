<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Valentine? ğŸ’˜</title>

<style>
:root{
  --bg1:#ffe3ea; --bg2:#ffb3c1;
  --card:#ffffff;
  --text:#1f1f1f;
  --yes:#ff2e63; --no:#343a40;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family:system-ui, sans-serif;
  background: radial-gradient(circle at top, var(--bg1), var(--bg2));
}

.card{
  width:min(92vw, 640px);
  background:var(--card);
  border-radius:26px;
  padding:24px;
  box-shadow:0 18px 60px rgba(0,0,0,.18);
  text-align:center;
}

.textzone{ position:relative; z-index:10; }
h1{margin:0 0 8px}
p{margin:0}

.speech{
  margin-top:14px;
  padding:12px;
  border-radius:18px;
  border:2px solid #111;
  font-weight:600;
  background:#fff;
}

/* ---------- PLAYGROUND ---------- */
.playground{
  margin-top:18px;
  width:100%;
  min-height:260px;
  background:#fff0f4;
  border-radius:18px;
  position:relative;
  overflow:hidden;
}

/* GIF LAYER */
.gifStage{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  border-radius:18px;
  clip-path: inset(0 round 18px);
  z-index:0;
}

/* GIFS (scaled visually only) */
.gifSprite{
  position:absolute;
  --gif-scale: 0.6;
  opacity:0;
  transition: opacity 400ms ease;
  will-change: transform;
  user-select:none;
  -webkit-user-drag:none;
}
.gifSprite.show{ opacity:.65; }

/* BUTTONS */
button{
  position:absolute;
  border:none;
  border-radius:999px;
  padding:12px 18px;
  font-weight:800;
  cursor:pointer;
  box-shadow:0 10px 22px rgba(0,0,0,.12);
  z-index:5;
}
#yes{
  background:var(--yes);
  color:#fff;
  left:50%;
  top:22px;
  transform:translateX(-50%);
}
#no{
  background:var(--no);
  color:#fff;
  left:50%;
  top:120px;
  transform:translateX(-50%);
}

.result{
  display:none;
  margin-top:14px;
  padding:12px;
  border-radius:18px;
  background:#fff0f4;
  font-weight:600;
}
.result.show{display:block}
</style>
</head>

<body>

<div class="card">
  <div class="textzone">
    <h1>Will you be my Valentine? ğŸ’˜</h1>
    <p>Careful with that â€œNoâ€â€¦</p>
    <div class="speech" id="speechText">Just press Yes.</div>
  </div>

  <div class="playground" id="playground">
    <div class="gifStage" id="gifStage"></div>
    <button id="yes">Yes ğŸ’—</button>
    <button id="no">No ğŸ™ƒ</button>
  </div>

  <div class="result" id="result">Correct choice ğŸ¥¹ğŸ’</div>
</div>

<script>
const playground = document.getElementById("playground");
const gifStage = document.getElementById("gifStage");
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const speechText = document.getElementById("speechText");
const result = document.getElementById("result");

/* ---------- GIF SET ---------- */
const gifPool = [
  "snoopy1.gif",
  "snoopy2.gif",
  "snoopy3.gif",
  "snoopy4.gif",
  "snoopy5.gif",
  "snoopy6.gif",
  "snoopy7.gif",
  "snoopy8.gif",
  "snoopy9.gif"
];

function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
let gifQueue = shuffle([...gifPool]);
let gifIndex = 0;

/* ---------- GIF ENGINE ---------- */
let sprites = [];
let rafId = null;
let running = true;
const SCALE = 0.6;

function spawnGif(){
  if(!running || gifIndex >= gifQueue.length) return;

  const img = document.createElement("img");
  img.className = "gifSprite";
  img.src = gifQueue[gifIndex++] + "?v=" + Date.now();
  gifStage.appendChild(img);

  img.onload = () => {
    const W = playground.clientWidth;
    const H = playground.clientHeight;

    const w = img.naturalWidth * SCALE;
    const h = img.naturalHeight * SCALE;

    let x = (W - w)/2;
    let y = (H - h)/2;

    const sprite = {
      el: img,
      x, y, w, h,
      vx:(Math.random()*2+1.5)*(Math.random()<.5?-1:1),
      vy:(Math.random()*2+1.5)*(Math.random()<.5?-1:1)
    };

    sprites.push(sprite);
    img.style.transform = `translate(${x}px,${y}px) scale(${SCALE})`;
    requestAnimationFrame(()=>img.classList.add("show"));

    if(!rafId) rafId=requestAnimationFrame(tick);
  };
}

function tick(){
  if(!running) return;
  const W = playground.clientWidth;
  const H = playground.clientHeight;

  sprites.forEach(s=>{
    s.x += s.vx;
    s.y += s.vy;

    if(s.x<=0 || s.x+s.w>=W) s.vx*=-1;
    if(s.y<=0 || s.y+s.h>=H) s.vy*=-1;

    s.el.style.transform =
      `translate(${s.x}px,${s.y}px) scale(${SCALE})`;
  });

  rafId=requestAnimationFrame(tick);
}

function stopGifs(){
  running=false;
  cancelAnimationFrame(rafId);
  gifStage.innerHTML="";
  sprites=[];
}

/* ---------- NO LOGIC ---------- */
const noLines=[
  "Ouch ğŸ˜­","Really?","Again??","Bold.","Stop.","Please.","Last chance.","No mercy.","Okayâ€¦","Enough ğŸ˜­"
];
let noClicks=0;

noBtn.onclick=()=>{
  if(noClicks>=10) return;
  speechText.textContent=noLines[noClicks++];
  spawnGif();
  if(noClicks===10) noBtn.style.display="none";
};

/* ---------- YES ---------- */
yesBtn.onclick=()=>{
  speechText.textContent="Correct choice ğŸ˜ŒğŸ’˜";
  result.classList.add("show");
  stopGifs();
  yesBtn.style.display=noBtn.style.display="none";
};
</script>

</body>
</html>
